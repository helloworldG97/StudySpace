<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Space - System Architecture Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn.active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .flowchart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            min-height: 600px;
            overflow: auto;
            position: relative;
        }

        .flowchart-zoom-container {
            transform-origin: top left;
            transition: transform 0.3s ease;
            width: fit-content;
            min-width: 100%;
        }

        .zoom-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .zoom-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #333;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .zoom-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .zoom-btn:active {
            transform: translateY(0);
        }

        .zoom-reset {
            background: rgba(139, 92, 246, 0.1);
            border-color: rgba(139, 92, 246, 0.3);
            color: #8b5cf6;
        }

        .zoom-reset:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .zoom-indicator {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            z-index: 10;
        }

        /* Smooth zoom transitions */
        .flowchart-zoom-container svg {
            transition: none;
        }

        /* Pan functionality for zoomed content */
        .flowchart-container.panning {
            cursor: grabbing;
        }

        .flowchart-container.panning .flowchart-zoom-container {
            cursor: grabbing;
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            color: white;
            margin-top: 20px;
        }

        .info-panel h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .info-panel ul {
            list-style: none;
            padding-left: 0;
        }

        .info-panel li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .info-panel li::before {
            content: "â–¶";
            position: absolute;
            left: 0;
            color: #a78bfa;
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .legend-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: block;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .tech-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
            transition: transform 0.3s ease;
        }

        .tech-item:hover {
            transform: translateY(-5px);
        }

        .tech-item h4 {
            margin-bottom: 5px;
            color: #a78bfa;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }

            .zoom-controls {
                position: relative;
                top: auto;
                right: auto;
                justify-content: center;
                margin-bottom: 10px;
            }

            .zoom-indicator {
                position: relative;
                top: auto;
                left: auto;
                display: inline-block;
                margin: 0 auto;
            }
        }

        /* Touch support for mobile */
        @media (hover: none) and (pointer: coarse) {
            .zoom-btn {
                padding: 12px 16px;
                font-size: 16px;
            }
        }

        /* Mermaid diagram styling */
        .mermaid {
            text-align: center;
        }

        /* Custom node styling for different types */
        .node-start { fill: #10b981; }
        .node-auth { fill: #f59e0b; }
        .node-view { fill: #3b82f6; }
        .node-model { fill: #8b5cf6; }
        .node-util { fill: #ef4444; }
        .node-data { fill: #06b6d4; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Study Space System Architecture</h1>
            <p>Multi-User Learning Management System with AI Document Processing & Advanced Features</p>
        </div>

        <div class="controls">
            <button class="btn active" onclick="showFlowchart('overview')">System Overview</button>
            <button class="btn" onclick="showFlowchart('authentication')">User Authentication</button>
            <button class="btn" onclick="showFlowchart('userisolation')">User Isolation</button>
            <button class="btn" onclick="showFlowchart('aiprocessing')">AI Document Processing</button>
            <button class="btn" onclick="showFlowchart('database')">Database Architecture</button>
            <button class="btn" onclick="showFlowchart('dataflow')">Data Flow</button>
            <button class="btn" onclick="showFlowchart('components')">Component Architecture</button>
            <button class="btn" onclick="showFlowchart('features')">Feature Modules</button>
            <button class="btn" onclick="showFlowchart('aifeatures')">AI Features</button>
            <button class="btn" onclick="showFlowchart('uiimprovements')">UI Improvements</button>
            <button class="btn" onclick="showFlowchart('visualizations')">Visual Presentations</button>
        </div>

        <div class="flowchart-container" id="flowchart-container">
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out (Ctrl + Mouse Wheel)">ğŸ”-</button>
                <button class="zoom-btn zoom-reset" onclick="resetZoom()" title="Reset Zoom (R)">âŒ‚</button>
                <button class="zoom-btn" onclick="zoomIn()" title="Zoom In (Ctrl + Mouse Wheel)">ğŸ”+</button>
            </div>
            <div class="zoom-indicator" id="zoom-indicator">100%</div>
            <div class="flowchart-zoom-container" id="flowchart-zoom-container">
                <div id="flowchart-content"></div>
            </div>
        </div>

        <div class="info-panel">
            <h3>ğŸ“‹ System Information</h3>
            <ul>
                <li><strong>Application Type:</strong> Multi-User JavaFX Desktop Application</li>
                <li><strong>Java Version:</strong> Java 21</li>
                <li><strong>UI Framework:</strong> JavaFX 21</li>
                <li><strong>Database:</strong> MySQL with User Isolation</li>
                <li><strong>AI Processing:</strong> Python Flask API with Qwen3-coder LLM</li>
                <li><strong>Build Tool:</strong> Maven</li>
                <li><strong>Architecture:</strong> MVC Pattern with Multi-User Data Store</li>
                <li><strong>UI Design:</strong> Glassmorphism with Dark Theme</li>
                <li><strong>Security:</strong> Complete User Isolation & Authentication</li>
                <li><strong>Team:</strong> Computer Engineering Students - University of Mindanao</li>
                <li><strong>New Features:</strong> Interactive Animations, Visual Presentations, Enhanced UI</li>
                <li><strong>AI Improvements:</strong> Perfect Table Alignment, File Creation Dates, Enhanced Processing</li>
            </ul>
        </div>

        <div class="legend">
            <div class="legend-item">
                <span class="legend-color" style="background: #10b981;"></span>
                <strong>Entry Points</strong><br>
                Application startup
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #f59e0b;"></span>
                <strong>Authentication</strong><br>
                Login/Signup system
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #3b82f6;"></span>
                <strong>Views</strong><br>
                User interface components
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #8b5cf6;"></span>
                <strong>Models</strong><br>
                Data structures
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #ef4444;"></span>
                <strong>Utilities</strong><br>
                Helper classes
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #06b6d4;"></span>
                <strong>Data Store</strong><br>
                Data persistence
            </div>
        </div>

        <div class="tech-stack">
            <div class="tech-item">
                <h4>Java 21</h4>
                <p>Modern Java features</p>
            </div>
            <div class="tech-item">
                <h4>JavaFX 21</h4>
                <p>Rich UI framework</p>
            </div>
            <div class="tech-item">
                <h4>MySQL</h4>
                <p>Relational database</p>
            </div>
            <div class="tech-item">
                <h4>Python</h4>
                <p>AI processing backend</p>
            </div>
            <div class="tech-item">
                <h4>Flask</h4>
                <p>REST API server</p>
            </div>
            <div class="tech-item">
                <h4>Qwen3-coder</h4>
                <p>AI language model</p>
            </div>
            <div class="tech-item">
                <h4>Maven</h4>
                <p>Build & dependency management</p>
            </div>
            <div class="tech-item">
                <h4>CSS3</h4>
                <p>Glassmorphism styling</p>
            </div>
            <div class="tech-item">
                <h4>HTML5</h4>
                <p>Interactive presentations</p>
            </div>
            <div class="tech-item">
                <h4>JavaScript</h4>
                <p>Dynamic animations</p>
            </div>
            <div class="tech-item">
                <h4>Mermaid</h4>
                <p>Diagram generation</p>
            </div>
            <div class="tech-item">
                <h4>PyPDF2</h4>
                <p>PDF processing</p>
            </div>
            <div class="tech-item">
                <h4>python-docx</h4>
                <p>Word document processing</p>
            </div>
            <div class="tech-item">
                <h4>python-pptx</h4>
                <p>PowerPoint processing</p>
            </div>
            <div class="tech-item">
                <h4>Git</h4>
                <p>Version control</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#8b5cf6',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#7c3aed',
                lineColor: '#64748b',
                secondaryColor: '#f1f5f9',
                tertiaryColor: '#e2e8f0'
            },
            flowchart: {
                nodeSpacing: 50,
                rankSpacing: 50,
                curve: 'basis'
            }
        });

        // Zoom functionality
        let currentZoom = 1;
        const zoomStep = 0.2;
        const minZoom = 0.3;
        const maxZoom = 3;
        let isPanning = false;
        let startX, startY, translateX = 0, translateY = 0;

        function zoomIn() {
            if (currentZoom < maxZoom) {
                currentZoom += zoomStep;
                applyZoom();
            }
        }

        function zoomOut() {
            if (currentZoom > minZoom) {
                currentZoom -= zoomStep;
                applyZoom();
            }
        }

        function resetZoom() {
            currentZoom = 1;
            translateX = 0;
            translateY = 0;
            applyZoom();
        }

        function applyZoom() {
            const container = document.getElementById('flowchart-zoom-container');
            const indicator = document.getElementById('zoom-indicator');
            if (container) {
                container.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
            }
            if (indicator) {
                indicator.textContent = Math.round(currentZoom * 100) + '%';
            }
        }

        // Mouse wheel zoom
        document.addEventListener('DOMContentLoaded', function() {
            const flowchartContainer = document.getElementById('flowchart-container');
            const zoomContainer = document.getElementById('flowchart-zoom-container');
            
            if (flowchartContainer && zoomContainer) {
                // Mouse wheel zoom
                flowchartContainer.addEventListener('wheel', function(e) {
                    if (e.ctrlKey) {
                        e.preventDefault();
                        if (e.deltaY < 0) {
                            zoomIn();
                        } else {
                            zoomOut();
                        }
                    }
                });

                // Pan functionality
                zoomContainer.addEventListener('mousedown', function(e) {
                    if (currentZoom > 1) {
                        isPanning = true;
                        startX = e.clientX - translateX;
                        startY = e.clientY - translateY;
                        flowchartContainer.style.cursor = 'grabbing';
                        flowchartContainer.classList.add('panning');
                    }
                });

                document.addEventListener('mousemove', function(e) {
                    if (isPanning) {
                        e.preventDefault();
                        translateX = e.clientX - startX;
                        translateY = e.clientY - startY;
                        applyZoom();
                    }
                });

                document.addEventListener('mouseup', function() {
                    if (isPanning) {
                        isPanning = false;
                        flowchartContainer.style.cursor = 'default';
                        flowchartContainer.classList.remove('panning');
                    }
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', function(e) {
                    if (e.ctrlKey) {
                        switch(e.key) {
                            case '=':
                            case '+':
                                e.preventDefault();
                                zoomIn();
                                break;
                            case '-':
                                e.preventDefault();
                                zoomOut();
                                break;
                        }
                    } else if (e.key === 'r' || e.key === 'R') {
                        e.preventDefault();
                        resetZoom();
                    }
                });
            }
        });

        // Flowchart definitions
        const flowcharts = {
            overview: `
                graph TD
                    A[ğŸš€ Main.java<br/>Application Entry Point] --> B[ğŸ” AuthView<br/>User Authentication]
                    B --> C{User Login/Register}
                    C -->|Success| D[ğŸ“± SidebarView<br/>Main Application]
                    C -->|Failure| B
                    
                    D --> E[ğŸ“š Study Modules]
                    E --> F[ğŸƒ AI Flashcards]
                    E --> G[ğŸ“ Smart Notes]
                    E --> H[âœ… Interactive Quizzes]
                    E --> I[ğŸ’» Code Practice]
                    E --> J[ğŸ“‹ Task Management]
                    E --> K[ğŸ® Snake Game]
                    
                    F --> L[ğŸ“Š MySQLDataStore<br/>User-Specific Data]
                    G --> L
                    H --> L
                    I --> L
                    J --> L
                    K --> L
                    
                    L --> M[ğŸ—„ï¸ MySQL Database<br/>User Isolation]
                    M --> N[ğŸ‘¤ User Data]
                    M --> O[ğŸ“„ User Notes]
                    M --> P[ğŸƒ User Flashcards]
                    M --> Q[â“ User Quizzes]
                    M --> R[ğŸ’» User Code Problems]
                    M --> S[ğŸ“‹ User Todo Items]
                    
                    T[ğŸ¤– AI Document Processor<br/>Python Flask API] --> F
                    T --> G
                    T --> U[ğŸ“ Document Upload<br/>PDF, DOC, PPT]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style B fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style D fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style L fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style M fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style T fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            authentication: `
                graph TD
                    A[ğŸš€ Application Start] --> B[ğŸ” AuthView Creation]
                    B --> C[ğŸ“‹ FXML Loading]
                    C --> D[ğŸ¨ CSS Styling]
                    D --> E[ğŸ‘¤ User Input]
                    
                    E --> F{Login or Signup?}
                    F -->|Login| G[ğŸ”‘ AuthController.loginUser]
                    F -->|Signup| H[ğŸ“ AuthController.registerUser]
                    
                    G --> I[ğŸ—„ï¸ MySQLDataStore.authenticateUser]
                    H --> J[ğŸ—„ï¸ MySQLDataStore.registerUser]
                    
                    I --> K{Valid Credentials?}
                    J --> L{Email Available?}
                    
                    K -->|Yes| M[âœ… Set Current User Session]
                    K -->|No| N[âŒ Show Error Message]
                    
                    L -->|Yes| O[ğŸ‘¤ Create New User in Database]
                    L -->|No| P[âŒ Email Already Exists]
                    
                    O --> M
                    N --> E
                    P --> E
                    
                    M --> Q[ğŸ  Switch to SidebarView]
                    Q --> R[ğŸ“± Main Application Interface<br/>User-Specific Content]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style B fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style M fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style R fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
            `,
            
            userisolation: `
                graph TD
                    A[ğŸ‘¤ User A Login] --> B[ğŸ” Authentication Success]
                    C[ğŸ‘¤ User B Login] --> D[ğŸ” Authentication Success]
                    
                    B --> E[ğŸ“Š User A Session<br/>user_id = 'user_001']
                    D --> F[ğŸ“Š User B Session<br/>user_id = 'user_002']
                    
                    E --> G[ğŸ“š User A Content Access]
                    F --> H[ğŸ“š User B Content Access]
                    
                    G --> I[ğŸ—„ï¸ Database Query<br/>WHERE user_id = 'user_001']
                    H --> J[ğŸ—„ï¸ Database Query<br/>WHERE user_id = 'user_002']
                    
                    I --> K[ğŸ“„ User A Notes Only]
                    I --> L[ğŸƒ User A Flashcards Only]
                    I --> M[âœ… User A Quizzes Only]
                    I --> N[ğŸ“‹ User A Todos Only]
                    
                    J --> O[ğŸ“„ User B Notes Only]
                    J --> P[ğŸƒ User B Flashcards Only]
                    J --> Q[âœ… User B Quizzes Only]
                    J --> R[ğŸ“‹ User B Todos Only]
                    
                    S[ğŸ›¡ï¸ Security Layer] --> I
                    S --> J
                    S --> T[âŒ Cross-User Access Denied]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style C fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style E fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style F fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style S fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style T fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            aiprocessing: `
                graph TD
                    A[ğŸ“ User Uploads Document<br/>PDF, DOC, PPT] --> B[ğŸ“¤ DocumentProcessingService]
                    B --> C[ğŸŒ HTTP POST to Python API<br/>localhost:5000/process]
                    
                    C --> D[ğŸ Flask API Server<br/>api_server.py]
                    D --> E[ğŸ¤– Document Processor<br/>document_processor.py]
                    
                    E --> F[ğŸ“„ Extract Text from Document]
                    F --> G[ğŸ§  Qwen3-coder LLM Processing]
                    
                    G --> H[ğŸ“š Generate Flashcards<br/>10-30 cards with Q&A]
                    G --> I[ğŸ“ Generate Study Notes<br/>Academic structure]
                    
                    H --> J[ğŸ’¾ Save to Database<br/>user_id = current_user]
                    I --> J
                    
                    J --> K[ğŸ“Š MySQLDataStore<br/>User-Specific Storage]
                    K --> L[ğŸ—„ï¸ MySQL Database<br/>flashcards & notes tables]
                    
                    L --> M[âœ… Return Success Response]
                    M --> N[ğŸ“± JavaFX UI Update<br/>Show New Content]
                    
                    O[âš™ï¸ AI Configuration<br/>config.json] --> G
                    P[ğŸ”§ Error Handling<br/>Fallback Mechanisms] --> E
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style D fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style G fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style J fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style N fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
            `,
            
            database: `
                graph TD
                    A[ğŸ—„ï¸ MySQL Database<br/>studyspace_db] --> B[ğŸ‘¤ users table<br/>id, full_name, email, password]
                    
                    B --> C[ğŸ“„ notes table<br/>id, user_id, title, content]
                    B --> D[ğŸƒ flashcard_decks table<br/>id, user_id, title, description]
                    B --> E[ğŸƒ flashcards table<br/>id, deck_id, question, answer]
                    B --> F[âœ… quizzes table<br/>id, user_id, title, description]
                    B --> G[â“ questions table<br/>id, quiz_id, question_text, options]
                    B --> H[ğŸ’» code_problems table<br/>id, user_id, title, description]
                    B --> I[ğŸ“‹ todo_items table<br/>id, user_id, title, description]
                    B --> J[ğŸ“ user_files table<br/>id, user_id, file_name, file_path]
                    B --> K[ğŸ“Š activities table<br/>id, user_id, activity_type, description]
                    
                    L[ğŸ” Foreign Key Constraints<br/>ON DELETE CASCADE] --> C
                    L --> D
                    L --> F
                    L --> H
                    L --> I
                    L --> J
                    L --> K
                    
                    M[ğŸ“ˆ Indexes for Performance<br/>idx_notes_user_id] --> C
                    M --> D
                    M --> F
                    M --> H
                    M --> I
                    M --> J
                    M --> K
                    
                    N[ğŸ›¡ï¸ User Isolation Queries<br/>WHERE user_id = ?] --> C
                    N --> D
                    N --> F
                    N --> H
                    N --> I
                    N --> J
                    N --> K
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style L fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style M fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style N fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
            `,
            
            dataflow: `
                graph TD
                    A[ğŸ‘¤ User Action] --> B[ğŸ“± View Layer]
                    B --> C[ğŸ¯ Event Handler]
                    C --> D[ğŸ“Š MySQLDataStore.getInstance]
                    
                    D --> E[ğŸ” Check User Authentication]
                    E --> F{Data Operation}
                    F -->|Create| G[â• INSERT with user_id]
                    F -->|Read| H[ğŸ“– SELECT WHERE user_id = ?]
                    F -->|Update| I[âœï¸ UPDATE WHERE user_id = ?]
                    F -->|Delete| J[ğŸ—‘ï¸ DELETE WHERE user_id = ?]
                    
                    G --> K[ğŸ—„ï¸ MySQL Database]
                    H --> K
                    I --> K
                    J --> K
                    
                    K --> L[ğŸ”„ Update UI with User Data]
                    L --> M[ğŸ“Š Activity Logging]
                    M --> N[ğŸ“ˆ Progress Tracking]
                    
                    O[ğŸ¤– AI Document Processing] --> P[ğŸ“ Document Upload]
                    P --> Q[ğŸ Python Flask API]
                    Q --> R[ğŸ§  Qwen3-coder LLM]
                    R --> S[ğŸ“š Generate Content]
                    S --> T[ğŸ’¾ Save with user_id]
                    T --> K
                    
                    U[ğŸ—ï¸ Models] --> D
                    U --> V[ğŸ‘¤ User Model]
                    U --> W[ğŸ“„ Note Model]
                    U --> X[ğŸƒ Flashcard Model]
                    U --> Y[â“ Question Model]
                    U --> Z[ğŸ’» CodeProblem Model]
                    U --> AA[ğŸ“‹ TodoItem Model]
                    U --> BB[ğŸ“Š Activity Model]
                    U --> CC[ğŸ“ UserFile Model]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style D fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style K fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style O fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style U fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
            `,
            
            components: `
                graph TD
                    A[ğŸ—ï¸ Multi-User Application Architecture] --> B[ğŸ“± Presentation Layer]
                    A --> C[ğŸ¯ Business Logic Layer]
                    A --> D[ğŸ’¾ Data Layer]
                    A --> E[ğŸ¤– AI Processing Layer]
                    
                    B --> F[ğŸ” AuthView]
                    B --> G[ğŸ“± SidebarView]
                    B --> H[ğŸƒ FlashcardListView]
                    B --> I[ğŸ“ NotesView]
                    B --> J[âœ… QuizListView]
                    B --> K[ğŸ’» CodePracticeView]
                    B --> L[ğŸ“‹ TodoListView]
                    B --> M[ğŸ® SnakeGameView]
                    
                    C --> N[ğŸ¯ AuthController]
                    C --> O[ğŸ”„ SceneManager]
                    C --> P[ğŸ› ï¸ IconUtils]
                    C --> Q[ğŸ“¤ DocumentProcessingService]
                    
                    D --> R[ğŸ’¾ MySQLDataStore]
                    D --> S[ğŸ—„ï¸ DatabaseConnection]
                    D --> T[ğŸ‘¤ User Model]
                    D --> U[ğŸ“„ Note Model]
                    D --> V[ğŸƒ Flashcard Model]
                    D --> W[â“ Question Model]
                    D --> X[ğŸ’» CodeProblem Model]
                    D --> Y[ğŸ“‹ TodoItem Model]
                    D --> Z[ğŸ“Š Activity Model]
                    D --> AA[ğŸ“ UserFile Model]
                    
                    E --> BB[ğŸ Python Flask API]
                    E --> CC[ğŸ¤– Document Processor]
                    E --> DD[ğŸ§  Qwen3-coder LLM]
                    E --> EE[âš™ï¸ AI Configuration]
                    
                    F --> N
                    G --> O
                    H --> R
                    I --> R
                    J --> R
                    K --> R
                    L --> R
                    M --> R
                    
                    Q --> BB
                    BB --> CC
                    CC --> DD
                    DD --> EE
                    
                    R --> S
                    S --> FF[ğŸ—„ï¸ MySQL Database<br/>User Isolation]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style D fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style E fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            features: `
                graph TD
                    A[ğŸ¯ Study Space Multi-User Features] --> B[ğŸ“š AI-Powered Learning Tools]
                    A --> C[ğŸ” User Isolation & Security]
                    A --> D[ğŸ® Entertainment]
                    A --> E[ğŸ“Š Progress Tracking]
                    
                    B --> F[ğŸ¤– AI Document Processing]
                    B --> G[ğŸƒ Smart Flashcard System]
                    B --> H[ğŸ“ Intelligent Notes]
                    B --> I[âœ… Interactive Quizzes]
                    B --> J[ğŸ’» Code Practice]
                    B --> K[ğŸ“‹ Task Management]
                    
                    F --> F1[ğŸ“ Document Upload<br/>PDF, DOC, PPT]
                    F --> F2[ğŸ§  AI Content Generation]
                    F --> F3[ğŸ“š Auto Flashcard Creation]
                    F --> F4[ğŸ“ Auto Note Generation]
                    
                    G --> G1[ğŸ¤– AI-Generated Decks]
                    G --> G2[ğŸ“š Manual Deck Creation]
                    G --> G3[ğŸ¯ Study Sessions]
                    G --> G4[ğŸ“ˆ Progress Tracking]
                    
                    H --> H1[ğŸ¤– AI-Generated Notes]
                    H --> H2[ğŸ“ Rich Text Editor]
                    H --> H3[ğŸ·ï¸ Category System]
                    H --> H4[ğŸ” Search & Filter]
                    
                    I --> I1[ğŸ¤– AI-Generated Quizzes]
                    I --> I2[â“ Multiple Choice]
                    I --> I3[â±ï¸ Time Limits]
                    I --> I4[ğŸ“Š Score Tracking]
                    
                    J --> J1[ğŸ’» Multi-Language Support]
                    J --> J2[ğŸ§ª Test Cases]
                    J --> J3[ğŸ“ˆ Difficulty Levels]
                    
                    K --> K1[ğŸ“‹ Priority System]
                    K --> K2[ğŸ“… Due Dates]
                    K --> K3[ğŸ“Š Completion Stats]
                    
                    C --> L[ğŸ‘¤ User Registration]
                    C --> M[ğŸ” Secure Authentication]
                    C --> N[ğŸ›¡ï¸ Data Isolation]
                    C --> O[ğŸ—„ï¸ User-Specific Database]
                    
                    L --> L1[ğŸ“§ Email Validation]
                    L --> L2[ğŸ”‘ Password Security]
                    
                    M --> M1[ğŸ” Session Management]
                    M --> M2[ğŸšª Automatic Logout]
                    
                    N --> N1[ğŸ“Š User-Specific Queries]
                    N --> N2[âŒ Cross-User Protection]
                    N --> N3[ğŸ—‘ï¸ Cascade Deletion]
                    
                    O --> O1[ğŸ—„ï¸ MySQL Database]
                    O --> O2[ğŸ”— Foreign Key Constraints]
                    O --> O3[ğŸ“ˆ Performance Indexes]
                    
                    D --> P[ğŸ Snake Game]
                    D --> Q[ğŸ¯ Break Activities]
                    
                    E --> R[ğŸ“Š Activity Logging]
                    E --> S[ğŸ“ˆ User Statistics]
                    E --> T[ğŸ† Achievements]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style D fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style E fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
            `,
            
            aifeatures: `
                graph TD
                    A[ğŸ¤– AI-Powered Features] --> B[ğŸ“„ Document Processing]
                    A --> C[ğŸ“š Content Generation]
                    A --> D[ğŸ¯ Smart Analysis]
                    A --> E[ğŸ“Š Enhanced Output]
                    
                    B --> B1[ğŸ“ Multi-Format Support<br/>PDF, DOC, DOCX, PPT, PPTX]
                    B --> B2[ğŸ” Content Extraction<br/>PyPDF2, python-docx, python-pptx]
                    B --> B3[ğŸ“ Text Processing<br/>Clean and structured content]
                    
                    C --> C1[ğŸ“– Study Notes<br/>Academic structure with sections]
                    C --> C2[ğŸƒ Flashcards<br/>Q&A pairs for memorization]
                    C --> C3[â“ Quiz Questions<br/>Multiple choice with explanations]
                    C --> C4[ğŸ“Š Key Concepts<br/>Important topics and definitions]
                    
                    D --> D1[ğŸ§  Qwen3-coder LLM<br/>Advanced language model]
                    D --> D2[ğŸ“ˆ Content Analysis<br/>Topic identification and categorization]
                    D --> D3[ğŸ¯ Difficulty Assessment<br/>Beginner, Intermediate, Advanced]
                    D --> D4[ğŸ“š Subject Classification<br/>Automatic subject detection]
                    
                    E --> E1[ğŸ“‹ Perfect Table Alignment<br/>Consistent formatting and spacing]
                    E --> E2[ğŸ“… File Creation Dates<br/>Accurate timestamp preservation]
                    E --> E3[ğŸ¨ Enhanced Formatting<br/>Professional academic style]
                    E --> E4[ğŸ“Š Structured Output<br/>Organized and readable content]
                    
                    F[âš™ï¸ AI Configuration] --> D1
                    G[ğŸ”§ Error Handling] --> B
                    H[ğŸ“Š Progress Tracking] --> C
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style D fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style E fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            uiimprovements: `
                graph TD
                    A[ğŸ¨ UI/UX Improvements] --> B[ğŸ” Authentication UI]
                    A --> C[ğŸ“± Component Enhancements]
                    A --> D[ğŸ® Interactive Elements]
                    A --> E[ğŸ“Š Visual Feedback]
                    
                    B --> B1[ğŸ‘ï¸ Password Field with Eye Icon<br/>Show/Hide password functionality]
                    B --> B2[ğŸ¨ Glassmorphism Design<br/>Modern transparent effects]
                    B --> B3[ğŸ“± Responsive Layout<br/>Adaptive to different screen sizes]
                    
                    C --> C1[ğŸƒ Quiz Option Text Wrapping<br/>Long choices display properly]
                    C --> C2[ğŸ“ Enhanced Form Fields<br/>Better input validation and styling]
                    C --> C3[ğŸ¯ Improved Button States<br/>Hover, active, and disabled states]
                    C --> C4[ğŸ“Š Progress Indicators<br/>Visual feedback for operations]
                    
                    D --> D1[ğŸ¬ Interactive Animations<br/>Document processing workflow]
                    D --> D2[ğŸ¯ Hover Effects<br/>Smooth transitions and feedback]
                    D --> D3[ğŸ“± Touch Support<br/>Mobile-friendly interactions]
                    D --> D4[âŒ¨ï¸ Keyboard Shortcuts<br/>Efficient navigation]
                    
                    E --> E1[ğŸ“Š Loading States<br/>Visual feedback during processing]
                    E --> E2[âœ… Success Messages<br/>Clear confirmation feedback]
                    E --> E3[âŒ Error Handling<br/>User-friendly error messages]
                    E --> E4[ğŸ“ˆ Progress Bars<br/>Operation progress indication]
                    
                    F[ğŸ¨ CSS Enhancements] --> B1
                    F --> C1
                    F --> D1
                    
                    G[ğŸ”§ JavaScript Improvements] --> D1
                    G --> E1
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style D fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style E fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            visualizations: `
                graph TD
                    A[ğŸ“Š Visual Presentations] --> B[ğŸ¬ Interactive Animations]
                    A --> C[ğŸ“‹ Documentation]
                    A --> D[ğŸ¯ Workflow Diagrams]
                    A --> E[ğŸ“± Responsive Design]
                    
                    B --> B1[ğŸ¬ Interactive Document Processing<br/>Click-to-play workflow animation]
                    B --> B2[ğŸ¯ Step-by-Step Visualization<br/>File upload to study materials]
                    B --> B3[ğŸ“Š Progress Tracking<br/>Real-time processing status]
                    B --> B4[ğŸ¨ Smooth Transitions<br/>Professional animation effects]
                    
                    C --> C1[ğŸ“– Comprehensive README<br/>Complete system documentation]
                    C --> C2[ğŸ—ï¸ Architecture Diagrams<br/>System structure visualization]
                    C --> C3[ğŸ“‹ Setup Guides<br/>Installation and configuration]
                    C --> C4[ğŸ”§ API Documentation<br/>Python Flask API reference]
                    
                    D --> D1[ğŸ”„ System Overview<br/>Complete application flow]
                    D --> D2[ğŸ” Authentication Flow<br/>User login and registration]
                    D --> D3[ğŸ¤– AI Processing Flow<br/>Document to study materials]
                    D --> D4[ğŸ—„ï¸ Database Architecture<br/>Data structure and relationships]
                    
                    E --> E1[ğŸ“± Mobile Responsive<br/>Works on all device sizes]
                    E --> E2[ğŸ¯ Touch Optimized<br/>Mobile-friendly interactions]
                    E --> E3[âŒ¨ï¸ Keyboard Navigation<br/>Accessible controls]
                    E --> E4[ğŸ” Zoom and Pan<br/>Interactive diagram exploration]
                    
                    F[ğŸ¨ Modern Design] --> B1
                    F --> D1
                    F --> E1
                    
                    G[ğŸ“Š Mermaid Integration] --> D1
                    G --> B1
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style D fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style E fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `
        };

        // Show flowchart function
        function showFlowchart(type) {
            // Update active button
            document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update flowchart content
            const content = document.getElementById('flowchart-content');
            content.innerHTML = `<div class="mermaid">${flowcharts[type]}</div>`;
            
            // Re-render Mermaid
            mermaid.init(undefined, content.querySelector('.mermaid'));
        }

        // Initialize with overview
        document.addEventListener('DOMContentLoaded', function() {
            showFlowchart('overview');
        });
    </script>
</body>
</html>

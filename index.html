<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Space - System Architecture Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .btn.active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .flowchart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            min-height: 600px;
            overflow: auto;
            position: relative;
        }

        .flowchart-zoom-container {
            transform-origin: top left;
            transition: transform 0.3s ease;
            width: fit-content;
            min-width: 100%;
        }

        .zoom-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .zoom-btn {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: #333;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .zoom-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .zoom-btn:active {
            transform: translateY(0);
        }

        .zoom-reset {
            background: rgba(139, 92, 246, 0.1);
            border-color: rgba(139, 92, 246, 0.3);
            color: #8b5cf6;
        }

        .zoom-reset:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .zoom-indicator {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            z-index: 10;
        }

        /* Smooth zoom transitions */
        .flowchart-zoom-container svg {
            transition: none;
        }

        /* Pan functionality for zoomed content */
        .flowchart-container.panning {
            cursor: grabbing;
        }

        .flowchart-container.panning .flowchart-zoom-container {
            cursor: grabbing;
        }

        .info-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            color: white;
            margin-top: 20px;
        }

        .info-panel h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .info-panel ul {
            list-style: none;
            padding-left: 0;
        }

        .info-panel li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .info-panel li::before {
            content: "‚ñ∂";
            position: absolute;
            left: 0;
            color: #a78bfa;
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .legend-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: block;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .tech-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: white;
            transition: transform 0.3s ease;
        }

        .tech-item:hover {
            transform: translateY(-5px);
        }

        .tech-item h4 {
            margin-bottom: 5px;
            color: #a78bfa;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }

            .zoom-controls {
                position: relative;
                top: auto;
                right: auto;
                justify-content: center;
                margin-bottom: 10px;
            }

            .zoom-indicator {
                position: relative;
                top: auto;
                left: auto;
                display: inline-block;
                margin: 0 auto;
            }
        }

        /* Touch support for mobile */
        @media (hover: none) and (pointer: coarse) {
            .zoom-btn {
                padding: 12px 16px;
                font-size: 16px;
            }
        }

        /* Mermaid diagram styling */
        .mermaid {
            text-align: center;
        }

        /* Custom node styling for different types */
        .node-start { fill: #10b981; }
        .node-auth { fill: #f59e0b; }
        .node-view { fill: #3b82f6; }
        .node-model { fill: #8b5cf6; }
        .node-util { fill: #ef4444; }
        .node-data { fill: #06b6d4; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Study Space System Architecture</h1>
            <p>Multi-User Learning Management System with AI Document Processing</p>
        </div>

        <div class="controls">
            <button class="btn active" onclick="showFlowchart('overview')">System Overview</button>
            <button class="btn" onclick="showFlowchart('authentication')">User Authentication</button>
            <button class="btn" onclick="showFlowchart('userisolation')">User Isolation</button>
            <button class="btn" onclick="showFlowchart('aiprocessing')">AI Document Processing</button>
            <button class="btn" onclick="showFlowchart('database')">Database Architecture</button>
            <button class="btn" onclick="showFlowchart('dataflow')">Data Flow</button>
            <button class="btn" onclick="showFlowchart('components')">Component Architecture</button>
            <button class="btn" onclick="showFlowchart('features')">Feature Modules</button>
        </div>

        <div class="flowchart-container" id="flowchart-container">
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out (Ctrl + Mouse Wheel)">üîç-</button>
                <button class="zoom-btn zoom-reset" onclick="resetZoom()" title="Reset Zoom (R)">‚åÇ</button>
                <button class="zoom-btn" onclick="zoomIn()" title="Zoom In (Ctrl + Mouse Wheel)">üîç+</button>
            </div>
            <div class="zoom-indicator" id="zoom-indicator">100%</div>
            <div class="flowchart-zoom-container" id="flowchart-zoom-container">
                <div id="flowchart-content"></div>
            </div>
        </div>

        <div class="info-panel">
            <h3>üìã System Information</h3>
            <ul>
                <li><strong>Application Type:</strong> Multi-User JavaFX Desktop Application</li>
                <li><strong>Java Version:</strong> Java 21</li>
                <li><strong>UI Framework:</strong> JavaFX 21</li>
                <li><strong>Database:</strong> MySQL with User Isolation</li>
                <li><strong>AI Processing:</strong> Python Flask API with Qwen3-coder LLM</li>
                <li><strong>Build Tool:</strong> Maven</li>
                <li><strong>Architecture:</strong> MVC Pattern with Multi-User Data Store</li>
                <li><strong>UI Design:</strong> Glassmorphism with Dark Theme</li>
                <li><strong>Security:</strong> Complete User Isolation & Authentication</li>
            </ul>
        </div>

        <div class="legend">
            <div class="legend-item">
                <span class="legend-color" style="background: #10b981;"></span>
                <strong>Entry Points</strong><br>
                Application startup
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #f59e0b;"></span>
                <strong>Authentication</strong><br>
                Login/Signup system
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #3b82f6;"></span>
                <strong>Views</strong><br>
                User interface components
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #8b5cf6;"></span>
                <strong>Models</strong><br>
                Data structures
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #ef4444;"></span>
                <strong>Utilities</strong><br>
                Helper classes
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background: #06b6d4;"></span>
                <strong>Data Store</strong><br>
                Data persistence
            </div>
        </div>

        <div class="tech-stack">
            <div class="tech-item">
                <h4>Java 21</h4>
                <p>Modern Java features</p>
            </div>
            <div class="tech-item">
                <h4>JavaFX 21</h4>
                <p>Rich UI framework</p>
            </div>
            <div class="tech-item">
                <h4>MySQL</h4>
                <p>Relational database</p>
            </div>
            <div class="tech-item">
                <h4>Python</h4>
                <p>AI processing backend</p>
            </div>
            <div class="tech-item">
                <h4>Flask</h4>
                <p>REST API server</p>
            </div>
            <div class="tech-item">
                <h4>Qwen3-coder</h4>
                <p>AI language model</p>
            </div>
            <div class="tech-item">
                <h4>Maven</h4>
                <p>Build & dependency management</p>
            </div>
            <div class="tech-item">
                <h4>CSS3</h4>
                <p>Glassmorphism styling</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#8b5cf6',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#7c3aed',
                lineColor: '#64748b',
                secondaryColor: '#f1f5f9',
                tertiaryColor: '#e2e8f0'
            },
            flowchart: {
                nodeSpacing: 50,
                rankSpacing: 50,
                curve: 'basis'
            }
        });

        // Zoom functionality
        let currentZoom = 1;
        const zoomStep = 0.2;
        const minZoom = 0.3;
        const maxZoom = 3;
        let isPanning = false;
        let startX, startY, translateX = 0, translateY = 0;

        function zoomIn() {
            if (currentZoom < maxZoom) {
                currentZoom += zoomStep;
                applyZoom();
            }
        }

        function zoomOut() {
            if (currentZoom > minZoom) {
                currentZoom -= zoomStep;
                applyZoom();
            }
        }

        function resetZoom() {
            currentZoom = 1;
            translateX = 0;
            translateY = 0;
            applyZoom();
        }

        function applyZoom() {
            const container = document.getElementById('flowchart-zoom-container');
            const indicator = document.getElementById('zoom-indicator');
            if (container) {
                container.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
            }
            if (indicator) {
                indicator.textContent = Math.round(currentZoom * 100) + '%';
            }
        }

        // Mouse wheel zoom
        document.addEventListener('DOMContentLoaded', function() {
            const flowchartContainer = document.getElementById('flowchart-container');
            const zoomContainer = document.getElementById('flowchart-zoom-container');
            
            if (flowchartContainer && zoomContainer) {
                // Mouse wheel zoom
                flowchartContainer.addEventListener('wheel', function(e) {
                    if (e.ctrlKey) {
                        e.preventDefault();
                        if (e.deltaY < 0) {
                            zoomIn();
                        } else {
                            zoomOut();
                        }
                    }
                });

                // Pan functionality
                zoomContainer.addEventListener('mousedown', function(e) {
                    if (currentZoom > 1) {
                        isPanning = true;
                        startX = e.clientX - translateX;
                        startY = e.clientY - translateY;
                        flowchartContainer.style.cursor = 'grabbing';
                        flowchartContainer.classList.add('panning');
                    }
                });

                document.addEventListener('mousemove', function(e) {
                    if (isPanning) {
                        e.preventDefault();
                        translateX = e.clientX - startX;
                        translateY = e.clientY - startY;
                        applyZoom();
                    }
                });

                document.addEventListener('mouseup', function() {
                    if (isPanning) {
                        isPanning = false;
                        flowchartContainer.style.cursor = 'default';
                        flowchartContainer.classList.remove('panning');
                    }
                });

                // Keyboard shortcuts
                document.addEventListener('keydown', function(e) {
                    if (e.ctrlKey) {
                        switch(e.key) {
                            case '=':
                            case '+':
                                e.preventDefault();
                                zoomIn();
                                break;
                            case '-':
                                e.preventDefault();
                                zoomOut();
                                break;
                        }
                    } else if (e.key === 'r' || e.key === 'R') {
                        e.preventDefault();
                        resetZoom();
                    }
                });
            }
        });

        // Flowchart definitions
        const flowcharts = {
            overview: `
                graph TD
                    A[üöÄ Main.java<br/>Application Entry Point] --> B[üîê AuthView<br/>User Authentication]
                    B --> C{User Login/Register}
                    C -->|Success| D[üì± SidebarView<br/>Main Application]
                    C -->|Failure| B
                    
                    D --> E[üìö Study Modules]
                    E --> F[üÉè AI Flashcards]
                    E --> G[üìù Smart Notes]
                    E --> H[‚úÖ Interactive Quizzes]
                    E --> I[üíª Code Practice]
                    E --> J[üìã Task Management]
                    E --> K[üéÆ Snake Game]
                    
                    F --> L[üìä MySQLDataStore<br/>User-Specific Data]
                    G --> L
                    H --> L
                    I --> L
                    J --> L
                    K --> L
                    
                    L --> M[üóÑÔ∏è MySQL Database<br/>User Isolation]
                    M --> N[üë§ User Data]
                    M --> O[üìÑ User Notes]
                    M --> P[üÉè User Flashcards]
                    M --> Q[‚ùì User Quizzes]
                    M --> R[üíª User Code Problems]
                    M --> S[üìã User Todo Items]
                    
                    T[ü§ñ AI Document Processor<br/>Python Flask API] --> F
                    T --> G
                    T --> U[üìÅ Document Upload<br/>PDF, DOC, PPT]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style B fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style D fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style L fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style M fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style T fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            authentication: `
                graph TD
                    A[üöÄ Application Start] --> B[üîê AuthView Creation]
                    B --> C[üìã FXML Loading]
                    C --> D[üé® CSS Styling]
                    D --> E[üë§ User Input]
                    
                    E --> F{Login or Signup?}
                    F -->|Login| G[üîë AuthController.loginUser]
                    F -->|Signup| H[üìù AuthController.registerUser]
                    
                    G --> I[üóÑÔ∏è MySQLDataStore.authenticateUser]
                    H --> J[üóÑÔ∏è MySQLDataStore.registerUser]
                    
                    I --> K{Valid Credentials?}
                    J --> L{Email Available?}
                    
                    K -->|Yes| M[‚úÖ Set Current User Session]
                    K -->|No| N[‚ùå Show Error Message]
                    
                    L -->|Yes| O[üë§ Create New User in Database]
                    L -->|No| P[‚ùå Email Already Exists]
                    
                    O --> M
                    N --> E
                    P --> E
                    
                    M --> Q[üè† Switch to SidebarView]
                    Q --> R[üì± Main Application Interface<br/>User-Specific Content]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style B fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style M fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style R fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
            `,
            
            userisolation: `
                graph TD
                    A[üë§ User A Login] --> B[üîê Authentication Success]
                    C[üë§ User B Login] --> D[üîê Authentication Success]
                    
                    B --> E[üìä User A Session<br/>user_id = 'user_001']
                    D --> F[üìä User B Session<br/>user_id = 'user_002']
                    
                    E --> G[üìö User A Content Access]
                    F --> H[üìö User B Content Access]
                    
                    G --> I[üóÑÔ∏è Database Query<br/>WHERE user_id = 'user_001']
                    H --> J[üóÑÔ∏è Database Query<br/>WHERE user_id = 'user_002']
                    
                    I --> K[üìÑ User A Notes Only]
                    I --> L[üÉè User A Flashcards Only]
                    I --> M[‚úÖ User A Quizzes Only]
                    I --> N[üìã User A Todos Only]
                    
                    J --> O[üìÑ User B Notes Only]
                    J --> P[üÉè User B Flashcards Only]
                    J --> Q[‚úÖ User B Quizzes Only]
                    J --> R[üìã User B Todos Only]
                    
                    S[üõ°Ô∏è Security Layer] --> I
                    S --> J
                    S --> T[‚ùå Cross-User Access Denied]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style C fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style E fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style F fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style S fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style T fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            aiprocessing: `
                graph TD
                    A[üìÅ User Uploads Document<br/>PDF, DOC, PPT] --> B[üì§ DocumentProcessingService]
                    B --> C[üåê HTTP POST to Python API<br/>localhost:5000/process]
                    
                    C --> D[üêç Flask API Server<br/>api_server.py]
                    D --> E[ü§ñ Document Processor<br/>document_processor.py]
                    
                    E --> F[üìÑ Extract Text from Document]
                    F --> G[üß† Qwen3-coder LLM Processing]
                    
                    G --> H[üìö Generate Flashcards<br/>10-30 cards with Q&A]
                    G --> I[üìù Generate Study Notes<br/>Academic structure]
                    
                    H --> J[üíæ Save to Database<br/>user_id = current_user]
                    I --> J
                    
                    J --> K[üìä MySQLDataStore<br/>User-Specific Storage]
                    K --> L[üóÑÔ∏è MySQL Database<br/>flashcards & notes tables]
                    
                    L --> M[‚úÖ Return Success Response]
                    M --> N[üì± JavaFX UI Update<br/>Show New Content]
                    
                    O[‚öôÔ∏è AI Configuration<br/>config.json] --> G
                    P[üîß Error Handling<br/>Fallback Mechanisms] --> E
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style D fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style G fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style J fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style N fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
            `,
            
            database: `
                graph TD
                    A[üóÑÔ∏è MySQL Database<br/>studyspace_db] --> B[üë§ users table<br/>id, full_name, email, password]
                    
                    B --> C[üìÑ notes table<br/>id, user_id, title, content]
                    B --> D[üÉè flashcard_decks table<br/>id, user_id, title, description]
                    B --> E[üÉè flashcards table<br/>id, deck_id, question, answer]
                    B --> F[‚úÖ quizzes table<br/>id, user_id, title, description]
                    B --> G[‚ùì questions table<br/>id, quiz_id, question_text, options]
                    B --> H[üíª code_problems table<br/>id, user_id, title, description]
                    B --> I[üìã todo_items table<br/>id, user_id, title, description]
                    B --> J[üìÅ user_files table<br/>id, user_id, file_name, file_path]
                    B --> K[üìä activities table<br/>id, user_id, activity_type, description]
                    
                    L[üîê Foreign Key Constraints<br/>ON DELETE CASCADE] --> C
                    L --> D
                    L --> F
                    L --> H
                    L --> I
                    L --> J
                    L --> K
                    
                    M[üìà Indexes for Performance<br/>idx_notes_user_id] --> C
                    M --> D
                    M --> F
                    M --> H
                    M --> I
                    M --> J
                    M --> K
                    
                    N[üõ°Ô∏è User Isolation Queries<br/>WHERE user_id = ?] --> C
                    N --> D
                    N --> F
                    N --> H
                    N --> I
                    N --> J
                    N --> K
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style L fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style M fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style N fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
            `,
            
            dataflow: `
                graph TD
                    A[üë§ User Action] --> B[üì± View Layer]
                    B --> C[üéØ Event Handler]
                    C --> D[üìä MySQLDataStore.getInstance]
                    
                    D --> E[üîê Check User Authentication]
                    E --> F{Data Operation}
                    F -->|Create| G[‚ûï INSERT with user_id]
                    F -->|Read| H[üìñ SELECT WHERE user_id = ?]
                    F -->|Update| I[‚úèÔ∏è UPDATE WHERE user_id = ?]
                    F -->|Delete| J[üóëÔ∏è DELETE WHERE user_id = ?]
                    
                    G --> K[üóÑÔ∏è MySQL Database]
                    H --> K
                    I --> K
                    J --> K
                    
                    K --> L[üîÑ Update UI with User Data]
                    L --> M[üìä Activity Logging]
                    M --> N[üìà Progress Tracking]
                    
                    O[ü§ñ AI Document Processing] --> P[üìÅ Document Upload]
                    P --> Q[üêç Python Flask API]
                    Q --> R[üß† Qwen3-coder LLM]
                    R --> S[üìö Generate Content]
                    S --> T[üíæ Save with user_id]
                    T --> K
                    
                    U[üèóÔ∏è Models] --> D
                    U --> V[üë§ User Model]
                    U --> W[üìÑ Note Model]
                    U --> X[üÉè Flashcard Model]
                    U --> Y[‚ùì Question Model]
                    U --> Z[üíª CodeProblem Model]
                    U --> AA[üìã TodoItem Model]
                    U --> BB[üìä Activity Model]
                    U --> CC[üìÅ UserFile Model]
                    
                    style A fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style D fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style K fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style O fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style U fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
            `,
            
            components: `
                graph TD
                    A[üèóÔ∏è Multi-User Application Architecture] --> B[üì± Presentation Layer]
                    A --> C[üéØ Business Logic Layer]
                    A --> D[üíæ Data Layer]
                    A --> E[ü§ñ AI Processing Layer]
                    
                    B --> F[üîê AuthView]
                    B --> G[üì± SidebarView]
                    B --> H[üÉè FlashcardListView]
                    B --> I[üìù NotesView]
                    B --> J[‚úÖ QuizListView]
                    B --> K[üíª CodePracticeView]
                    B --> L[üìã TodoListView]
                    B --> M[üéÆ SnakeGameView]
                    
                    C --> N[üéØ AuthController]
                    C --> O[üîÑ SceneManager]
                    C --> P[üõ†Ô∏è IconUtils]
                    C --> Q[üì§ DocumentProcessingService]
                    
                    D --> R[üíæ MySQLDataStore]
                    D --> S[üóÑÔ∏è DatabaseConnection]
                    D --> T[üë§ User Model]
                    D --> U[üìÑ Note Model]
                    D --> V[üÉè Flashcard Model]
                    D --> W[‚ùì Question Model]
                    D --> X[üíª CodeProblem Model]
                    D --> Y[üìã TodoItem Model]
                    D --> Z[üìä Activity Model]
                    D --> AA[üìÅ UserFile Model]
                    
                    E --> BB[üêç Python Flask API]
                    E --> CC[ü§ñ Document Processor]
                    E --> DD[üß† Qwen3-coder LLM]
                    E --> EE[‚öôÔ∏è AI Configuration]
                    
                    F --> N
                    G --> O
                    H --> R
                    I --> R
                    J --> R
                    K --> R
                    L --> R
                    M --> R
                    
                    Q --> BB
                    BB --> CC
                    CC --> DD
                    DD --> EE
                    
                    R --> S
                    S --> FF[üóÑÔ∏è MySQL Database<br/>User Isolation]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style D fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
                    style E fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            features: `
                graph TD
                    A[üéØ Study Space Multi-User Features] --> B[üìö AI-Powered Learning Tools]
                    A --> C[üîê User Isolation & Security]
                    A --> D[üéÆ Entertainment]
                    A --> E[üìä Progress Tracking]
                    
                    B --> F[ü§ñ AI Document Processing]
                    B --> G[üÉè Smart Flashcard System]
                    B --> H[üìù Intelligent Notes]
                    B --> I[‚úÖ Interactive Quizzes]
                    B --> J[üíª Code Practice]
                    B --> K[üìã Task Management]
                    
                    F --> F1[üìÅ Document Upload<br/>PDF, DOC, PPT]
                    F --> F2[üß† AI Content Generation]
                    F --> F3[üìö Auto Flashcard Creation]
                    F --> F4[üìù Auto Note Generation]
                    
                    G --> G1[ü§ñ AI-Generated Decks]
                    G --> G2[üìö Manual Deck Creation]
                    G --> G3[üéØ Study Sessions]
                    G --> G4[üìà Progress Tracking]
                    
                    H --> H1[ü§ñ AI-Generated Notes]
                    H --> H2[üìù Rich Text Editor]
                    H --> H3[üè∑Ô∏è Category System]
                    H --> H4[üîç Search & Filter]
                    
                    I --> I1[ü§ñ AI-Generated Quizzes]
                    I --> I2[‚ùì Multiple Choice]
                    I --> I3[‚è±Ô∏è Time Limits]
                    I --> I4[üìä Score Tracking]
                    
                    J --> J1[üíª Multi-Language Support]
                    J --> J2[üß™ Test Cases]
                    J --> J3[üìà Difficulty Levels]
                    
                    K --> K1[üìã Priority System]
                    K --> K2[üìÖ Due Dates]
                    K --> K3[üìä Completion Stats]
                    
                    C --> L[üë§ User Registration]
                    C --> M[üîê Secure Authentication]
                    C --> N[üõ°Ô∏è Data Isolation]
                    C --> O[üóÑÔ∏è User-Specific Database]
                    
                    L --> L1[üìß Email Validation]
                    L --> L2[üîë Password Security]
                    
                    M --> M1[üîê Session Management]
                    M --> M2[üö™ Automatic Logout]
                    
                    N --> N1[üìä User-Specific Queries]
                    N --> N2[‚ùå Cross-User Protection]
                    N --> N3[üóëÔ∏è Cascade Deletion]
                    
                    O --> O1[üóÑÔ∏è MySQL Database]
                    O --> O2[üîó Foreign Key Constraints]
                    O --> O3[üìà Performance Indexes]
                    
                    D --> P[üêç Snake Game]
                    D --> Q[üéØ Break Activities]
                    
                    E --> R[üìä Activity Logging]
                    E --> S[üìà User Statistics]
                    E --> T[üèÜ Achievements]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style D fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style E fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
            `
        };

        // Show flowchart function
        function showFlowchart(type) {
            // Update active button
            document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update flowchart content
            const content = document.getElementById('flowchart-content');
            content.innerHTML = `<div class="mermaid">${flowcharts[type]}</div>`;
            
            // Re-render Mermaid
            mermaid.init(undefined, content.querySelector('.mermaid'));
        }

        // Initialize with overview
        document.addEventListener('DOMContentLoaded', function() {
            showFlowchart('overview');
        });
    </script>
</body>
</html>

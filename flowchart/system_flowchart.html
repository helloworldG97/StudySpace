<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Space - System Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 10px;
            background: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 210mm; /* A4 width */
            margin: 0 auto;
            background: white;
            padding: 15mm;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                max-width: none;
                margin: 0;
                padding: 10mm;
                box-shadow: none;
            }
            .controls {
                display: none;
            }
            .flowchart-container {
                page-break-inside: avoid;
                min-height: 300px;
            }
            .mermaid {
                font-size: 12px !important;
            }
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #2d3748;
            font-size: 1.8em;
            margin: 0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .header p {
            color: #4a5568;
            font-size: 1em;
            margin: 8px 0;
        }
        
        .flowchart-container {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 10px;
            margin: 10px 0;
            min-height: 400px;
        }
        
        .section-title {
            color: #2d3748;
            font-size: 1.8em;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        .info-panel {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: 15px;
            margin: 10px 0;
            border-left: 3px solid #667eea;
        }
        
        .info-panel h3 {
            color: #2d3748;
            margin-top: 0;
        }
        
        .info-panel ul {
            color: #4a5568;
            line-height: 1.6;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 10px 0;
        }
        
        @media print {
            .tech-stack {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .tech-item {
            background: #667eea;
            color: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-size: 0.9em;
        }
        
        .tech-item h4 {
            margin: 0 0 5px 0;
            font-size: 1em;
        }
        
        .tech-item p {
            margin: 0;
            font-size: 0.8em;
            opacity: 0.9;
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .btn.active {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Study Space System Flowchart</h1>
            <p>Comprehensive Learning Management System Architecture</p>
        </div>
        
        <div class="controls">
            <button class="btn active" onclick="showFlowchart('overview')">System Overview</button>
            <button class="btn" onclick="showFlowchart('authentication')">Authentication Flow</button>
            <button class="btn" onclick="showFlowchart('userisolation')">User Isolation</button>
            <button class="btn" onclick="showFlowchart('aiprocessing')">AI Document Processing</button>
            <button class="btn" onclick="showFlowchart('database')">Database Architecture</button>
            <button class="btn" onclick="showFlowchart('dataflow')">Data Flow</button>
            <button class="btn" onclick="showFlowchart('components')">Component Architecture</button>
            <button class="btn" onclick="showFlowchart('features')">Feature Modules</button>
            <button class="btn" onclick="window.print()" style="background: #10b981;">üñ®Ô∏è Print Documentation</button>
        </div>
        
        <div class="flowchart-container">
            <div id="flowchart-content"></div>
        </div>
        
        <div class="info-panel">
            <h3>üìã System Information</h3>
            <ul>
                <li><strong>Application Type:</strong> Multi-User JavaFX Desktop Application</li>
                <li><strong>Java Version:</strong> Java 21</li>
                <li><strong>UI Framework:</strong> JavaFX 21</li>
                <li><strong>Database:</strong> MySQL with User Isolation</li>
                <li><strong>AI Processing:</strong> Python Flask API with Qwen3-coder LLM</li>
                <li><strong>Build Tool:</strong> Maven</li>
                <li><strong>Architecture:</strong> MVC Pattern with Multi-User Data Store</li>
                <li><strong>UI Design:</strong> Glassmorphism with Dark Theme</li>
                <li><strong>Security:</strong> Complete User Isolation & Authentication</li>
                <li><strong>Team:</strong> Computer Engineering Students - University of Mindanao</li>
            </ul>
        </div>
        
        <div class="tech-stack">
            <div class="tech-item">
                <h4>Java 21</h4>
                <p>Modern Java with latest features</p>
            </div>
            <div class="tech-item">
                <h4>JavaFX 21</h4>
                <p>Rich desktop application framework</p>
            </div>
            <div class="tech-item">
                <h4>MySQL</h4>
                <p>Relational database with user isolation</p>
            </div>
            <div class="tech-item">
                <h4>Python Flask</h4>
                <p>AI document processing backend</p>
            </div>
            <div class="tech-item">
                <h4>Qwen3-coder</h4>
                <p>AI model for content generation</p>
            </div>
            <div class="tech-item">
                <h4>Maven</h4>
                <p>Dependency management and build tool</p>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#2d3748',
                primaryBorderColor: '#4a5568',
                lineColor: '#4a5568',
                secondaryColor: '#f7fafc',
                tertiaryColor: '#edf2f7'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });

        const flowcharts = {
            overview: `
                graph TD
                    A[üöÄ Study Space Application]
                    A --> B[üîê Authentication System]
                    A --> C[üì± Main Application Interface]
                    A --> D[ü§ñ AI Document Processing]
                    A --> E[üóÑÔ∏è Database Management]
                    
                    B --> B1[üë§ User Registration]
                    B --> B2[üîë User Login]
                    B --> B3[üõ°Ô∏è Session Management]
                    B --> B4[üö™ User Logout]
                    
                    C --> C1[üìö Study Modules]
                    C1 --> C2[üÉè AI Flashcards]
                    C1 --> C3[üìù Smart Notes]
                    C1 --> C4[‚úÖ Interactive Quizzes]
                    C1 --> C5[üìã Task Management]
                    C1 --> C6[üéÆ Snake Game]
                    
                    D --> D1[üìÅ Document Upload]
                    D --> D2[ü§ñ AI Content Generation]
                    D --> D3[üìä Content Processing]
                    D --> D4[üíæ Database Storage]
                    
                    E --> E1[üë§ User Data]
                    E --> E2[üìÑ User Notes]
                    E --> E3[üÉè User Flashcards]
                    E --> E4[‚ùì User Quizzes]
                    E --> E5[üìã User Tasks]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style C fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style D fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style E fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
            `,
            
            authentication: `
                graph TD
                    A[üöÄ Study Space Launch]
                    A --> B{User Status}
                    B -->|New User| C[üë§ User Registration]
                    B -->|Existing User| D[üîë User Login]
                    B -->|Guest| E[üì± Guest Mode]
                    
                    C --> C1[üìß Email Validation]
                    C1 --> C2[üîë Password Creation]
                    C2 --> C3[üë§ Profile Setup]
                    C3 --> C4[‚úÖ Account Creation]
                    C4 --> F[üè† Main Dashboard]
                    
                    D --> D1[üìß Email Input]
                    D1 --> D2[üîë Password Verification]
                    D2 --> D3{Authentication}
                    D3 -->|Success| F
                    D3 -->|Failure| G[‚ùå Login Error]
                    G --> M[üîÑ Retry Login]
                    M --> D
                    
                    E --> H[üì± Limited Access]
                    H --> I[üîê Prompt for Registration]
                    I --> C
                    
                    F --> J[üõ°Ô∏è Session Management]
                    J --> K[‚è∞ Auto Logout Timer]
                    J --> L[üîÑ Session Refresh]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style F fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style G fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            userisolation: `
                graph TD
                    A[üë§ User Login]
                    A --> B[üõ°Ô∏è User Session Created]
                    B --> C[üîê User ID Authentication]
                    C --> D[üìä User-Specific Data Access]
                    
                    D --> E[üìÑ User Notes]
                    D --> F[üÉè User Flashcards]
                    D --> G[‚ùì User Quizzes]
                    D --> H[üìã User Tasks]
                    D --> I[üìÅ User Files]
                    
                    E --> J[üóÑÔ∏è MySQL Database]
                    F --> J
                    G --> J
                    H --> J
                    I --> J
                    
                    J --> K[üîç Database Queries with User ID Filter]
                    K --> L[üìä User-Specific Results]
                    L --> M[üõ°Ô∏è Data Isolation Maintained]
                    
                    N[üë§ Other Users]
                    N --> O[üö´ No Access to User Data]
                    O --> P[üõ°Ô∏è Complete Isolation]
                    
                    Q[üóëÔ∏è User Account Deletion]
                    Q --> R[üîÑ Cascade Delete All User Data]
                    R --> S[‚úÖ Complete Data Removal]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style M fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style P fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            aiprocessing: `
                graph TD
                    A[üìÅ Document Upload]
                    A --> B[üîç File Type Detection]
                    B --> C{Supported Format?}
                    C -->|Yes| D[üìÑ Content Extraction]
                    C -->|No| E[‚ùå Unsupported Format Error]
                    
                    D --> F[üìù Text Processing]
                    F --> G[ü§ñ AI Model Processing]
                    G --> H[üß† Qwen3-coder LLM]
                    
                    H --> I[üìä Content Analysis]
                    I --> J[üìö Study Notes Generation]
                    I --> K[üÉè Flashcard Creation]
                    I --> L[‚ùì Quiz Generation]
                    
                    J --> M[üìã Structured Notes]
                    K --> N[üÉè Question-Answer Pairs]
                    L --> O[‚ùì Multiple Choice Questions]
                    
                    M --> P[üíæ Database Storage]
                    N --> P
                    O --> P
                    
                    P --> Q[‚úÖ Content Available to User]
                    
                    R[‚öôÔ∏è AI Configuration]
                    R --> H
                    S[üîß Error Handling]
                    S --> T[üìä Fallback Content Generation]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style H fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style Q fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
            `,
            
            database: `
                graph TD
                    A[üóÑÔ∏è MySQL Database] --> B[üë§ Users Table]
                    A --> C[üìÑ Notes Table]
                    A --> D[üÉè Flashcard Decks Table]
                    A --> E[üÉè Flashcards Table]
                    A --> F[‚ùì Quizzes Table]
                    A --> G[‚ùì Questions Table]
                    A --> H[üìã Todo Items Table]
                    A --> I[üìÅ User Files Table]
                    A --> J[üìä Activities Table]
                    
                    B --> K[üîë Primary Key: id]
                    B --> L[üìß Email Unique]
                    B --> M[üîê Password Hash]
                    B --> N[üìä User Statistics]
                    
                    C --> O[üîó Foreign Key: user_id]
                    D --> O
                    F --> O
                    H --> O
                    I --> O
                    J --> O
                    
                    E --> P[üîó Foreign Key: deck_id]
                    G --> Q[üîó Foreign Key: quiz_id]
                    
                    R[üõ°Ô∏è User Isolation] --> S[üìä All Queries Filter by user_id]
                    S --> T[üîí Complete Data Privacy]
                    
                    U[üóëÔ∏è Cascade Deletion] --> V[üë§ User Deletion]
                    V --> W[üîÑ Automatic Data Cleanup]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style T fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style W fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
            `,
            
            dataflow: `
                graph TD
                    A[üë§ User Action] --> B[üì± JavaFX Interface]
                    B --> C[üéØ Business Logic Layer]
                    C --> D[üíæ Data Access Layer]
                    D --> E[üóÑÔ∏è MySQL Database]
                    
                    E --> F[üìä Query Results]
                    F --> G[üîÑ Data Processing]
                    G --> H[üì± UI Update]
                    H --> I[üë§ User Feedback]
                    
                    J[üìÅ Document Upload] --> K[üêç Python Flask API]
                    K --> L[ü§ñ AI Processing]
                    L --> M[üìä Generated Content]
                    M --> N[üíæ Database Storage]
                    N --> O[üì± JavaFX Update]
                    
                    P[üîÑ Real-time Updates] --> Q[üìä Global Refresh System]
                    Q --> R[üîÑ UI Synchronization]
                    R --> S[üì± Live Data Display]
                    
                    T[‚öôÔ∏è Configuration] --> U[üìÑ Config Files]
                    U --> V[üîß System Settings]
                    V --> W[üìä Runtime Behavior]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style E fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style L fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
            `,
            
            components: `
                graph TD
                    A[üèóÔ∏è Study Space Architecture] --> B[üì± Presentation Layer]
                    A --> C[üéØ Business Logic Layer]
                    A --> D[üíæ Data Layer]
                    A --> E[ü§ñ AI Processing Layer]
                    
                    B --> F[üîê AuthView]
                    B --> G[üì± SidebarView]
                    B --> H[üÉè FlashcardListView]
                    B --> I[üìù NotesView]
                    B --> J[‚úÖ QuizListView]
                    B --> K[üìã TodoListView]
                    B --> L[üéÆ SnakeGameView]
                    
                    C --> M[üéØ AuthController]
                    C --> N[üîÑ SceneManager]
                    C --> O[üõ†Ô∏è IconUtils]
                    C --> P[üì§ DocumentProcessingService]
                    
                    D --> Q[üíæ MySQLDataStore]
                    D --> R[üóÑÔ∏è DatabaseConnection]
                    D --> S[üë§ User Model]
                    D --> T[üìÑ Note Model]
                    D --> U[üÉè Flashcard Model]
                    D --> V[‚ùì Question Model]
                    D --> W[üìã TodoItem Model]
                    D --> X[üìä Activity Model]
                    D --> Y[üìÅ UserFile Model]
                    
                    E --> Z[üêç Python Flask API]
                    E --> AA[ü§ñ Document Processor]
                    E --> BB[üß† Qwen3-coder LLM]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style C fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style D fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style E fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
            `,
            
            features: `
                graph TD
                    A[üéØ Study Space Features] --> B[üîê Authentication System]
                    A --> C[üìö Study Tools]
                    A --> D[ü§ñ AI Processing]
                    A --> E[üéÆ Interactive Features]
                    A --> F[üìä Progress Tracking]
                    
                    B --> B1[üë§ User Registration]
                    B --> B2[üîë Secure Login]
                    B --> B3[üõ°Ô∏è Session Management]
                    B --> B4[üë§ Profile Management]
                    
                    C --> C1[üÉè AI Flashcards]
                    C --> C2[üìù Smart Notes]
                    C --> C3[‚úÖ Interactive Quizzes]
                    C --> C4[üìã Task Management]
                    
                    C1 --> C1A[ü§ñ AI-Generated Flashcards]
                    C1 --> C1B[üìö Custom Flashcard Decks]
                    C1 --> C1C[üéØ Study Sessions]
                    
                    C2 --> C2A[ü§ñ AI-Generated Notes]
                    C2 --> C2B[üìù Rich Text Editor]
                    C2 --> C2C[üè∑Ô∏è Category System]
                    
                    C3 --> C3A[ü§ñ AI-Generated Quizzes]
                    C3 --> C3B[‚ùì Multiple Choice]
                    C3 --> C3C[‚è±Ô∏è Time Limits]
                    C3 --> C3D[üìä Score Tracking]
                    
                    C4 --> C4A[üìã Priority System]
                    C4 --> C4B[üìÖ Due Dates]
                    C4 --> C4C[üìä Completion Stats]
                    
                    D --> D1[üìÅ Document Upload]
                    D --> D2[ü§ñ Content Generation]
                    D --> D3[üìä Smart Categorization]
                    
                    E --> E1[üêç Snake Game]
                    E --> E2[üéØ Break Activities]
                    E --> E3[üèÜ Achievement System]
                    
                    F --> F1[üìä Activity Logging]
                    F --> F2[üìà User Statistics]
                    F --> F3[üéØ Weekly Goals]
                    F --> F4[üìä Performance Metrics]
                    
                    style A fill:#8b5cf6,stroke:#7c3aed,stroke-width:3px,color:#fff
                    style B fill:#ef4444,stroke:#dc2626,stroke-width:3px,color:#fff
                    style C fill:#3b82f6,stroke:#2563eb,stroke-width:3px,color:#fff
                    style D fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
                    style E fill:#f59e0b,stroke:#d97706,stroke-width:3px,color:#fff
                    style F fill:#06b6d4,stroke:#0891b2,stroke-width:3px,color:#fff
            `
        };

        function showFlowchart(type) {
            // Remove active class from all buttons
            document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Update flowchart content
            const content = document.getElementById('flowchart-content');
            content.innerHTML = `<div class="mermaid">${flowcharts[type]}</div>`;
            
            // Reinitialize mermaid
            mermaid.init();
        }

        // Initialize with overview
        document.addEventListener('DOMContentLoaded', function() {
            showFlowchart('overview');
        });
    </script>
</body>
</html>
